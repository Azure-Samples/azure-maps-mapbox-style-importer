/* MIT License - Copyright (c) Microsoft Corporation. */


!function(t,u){"use strict";var e=(d.prototype.addStyle=function(e){var i=this,t=i._map;e.light&&t.setStyle({light:i.convertOptions(e.light)}),e.sources&&Object.keys(e.sources).forEach(function(t){i.addSource(t,e.sources[t])}),e.layers&&e.layers.forEach(function(t){i.addLayer(t)})},d.prototype.addSource=function(t,e){var i=this,a=i._map,o=i.convertOptions(e);switch(e.type){case"image":case"raster":t&&(i.rasterSources[t]=o);break;case"geojson":i.addDataSource(o,e,t);break;case"vector":a.sources.add(new u.source.VectorTileSource(t,o))}},d.prototype.addLayer=function(t,e){var i=this,a=i._map;if(-1<d.supportedMBLayers.indexOf(t.type)){var o,r=t.source;if("string"==typeof r)i.rasterSources[r]&&(r=i.rasterSources[r]);else{var n=i.convertOptions(r);switch(r.type){case"image":case"raster":r=n;break;case"geojson":r=i.addDataSource(l,r);break;case"vector":r=new u.source.VectorTileSource(null,n)}}var s=t.id,l=i.convertOptions(t);switch(t.type){case"circle":o=new u.layer.BubbleLayer(r,s,Object.assign({color:"#000000",radius:5,strokeColor:"#000000",strokeWidth:0},l));break;case"heatmap":o=new u.layer.HeatMapLayer(r,s,l);break;case"line":o=new u.layer.LineLayer(r,s,Object.assign({strokeColor:"#000000",lineCap:"butt",lineJoin:"miter",strokeWidth:2},l));break;case"fill-extrusion":o=new u.layer.PolygonExtrusionLayer(r,s,Object.assign({fillColor:"#000000",fillOpacity:1},l));break;case"fill":o=new u.layer.PolygonLayer(r,s,Object.assign({fillColor:"#000000",fillOpacity:1},l));break;case"symbol":var c=Object.assign({},{iconOptions:{image:"none"},textOptions:{}});l.iconOptions&&Object.assign(c.iconOptions,l.iconOptions),l.textOptions&&Object.assign(c.textOptions,l.textOptions),o=new u.layer.SymbolLayer(r,s,c);break;case"raster":l=Object.assign(l,r),o=r.coordinates?new u.layer.ImageLayer(l,s):new u.layer.TileLayer(l,s)}if(o){if(t.metadata&&(o.metadata=t.metadata),e&&!a.layers.getLayerById(e)){var p=e.toLowerCase();e=0<p.indexOf("label")?"labels":0<p.indexOf("road")?"transit":void 0}a.layers.add(o,e)}}},d.prototype.addDataSource=function(t,e,i){var a=new u.source.DataSource(i,t);return this._map.sources.add(a),e.data&&("string"==typeof e.data?a.importDataFromUrl(e.data):a.add(e.data)),a},d.prototype.convertOptions=function(e){var i={},a=this;return Object.keys(e).forEach(function(t){a.extractOption(t,e,i)}),e.paint&&Object.assign(i,a.convertOptions(e.paint)),e.layout&&Object.assign(i,a.convertOptions(e.layout)),i},d.prototype.extractOption=function(t,e,i){var a=this,o=e[t];switch(t){case"scheme":i.isTMS="tms"===o;break;case"visibility":i.visible="none"!==o;break;case"clusterProperties":i.clusterProperties=o;break;case"tiles":i.tileUrl=o[0];break;case"url":i.tileUrl=o,i.url=o;break;case"text-font":var r=[];o.forEach(function(t){var e=t.toLowerCase(),i="StandardFont";-1<e.indexOf("condensed")&&(i="StandardFontCondensed");var a="Regular";-1<e.indexOf("bold")?a="Bold":-1<e.indexOf("black")?a="Black":-1<e.indexOf("light")&&(a="Light");var o=i+"-"+a;i&&-1==r.indexOf(o)&&r.push(o)}),0<r.length&&(i.textOptions=Object.assign(i.textOptions||{},{font:[r[0]]}));break;case"icon-image":if(!a._map.imageSprite.hasImage(o)){var n=!0;-1<o.indexOf("marker")?n=!(o="marker-blue"):-1<o.indexOf("triangle")||-1<o.indexOf("campsite")?o="triangle":-1<o.indexOf("car")?o="car":-1<o.indexOf("circle")?o="pin-round":-1<o.indexOf("embassy")?o="flag":n=!(o="none"),o&&n&&!a._map.imageSprite.hasImage(o)&&a._map.imageSprite.createFromTemplate(o,o,"#1E90FF","#fff",1).then(function(){})}o&&(i.iconOptions=Object.assign(i.iconOptions||{},{image:o}));break;default:var s=d.mbToAzName[t];if(s)if(-1<s.indexOf("-")){var l=s.split("-");i[l[0]]||(i[l[0]]={}),i[l[0]][l[1]]=o}else i[s]=o}},d.supportedMBLayers=["circle","fill","fill-extrusion","line","heatmap","raster","symbol"],d.supportedMBSources=["vector","raster","geojson","image"],d.mbToAzName={"source-layer":"sourceLayer",filter:"filter",minzoom:"minZoom",maxzoom:"maxZoom",anchor:"anchor",color:"color",intensity:"intensity",position:"position",buffer:"buffer",cluster:"cluster",clusterProperties:"clusterProperties",clusterMaxZoom:"clusterMaxZoom",clusterRadius:"clusterRadius",lineMetrics:"lineMetrics",tolerance:"tolerance",tileSize:"tileSize",url:"url",bounds:"bounds",coordinates:"coordinates","raster-brightness-min":"minBrightness","raster-brightness-max":"maxBrightness","raster-contrast":"contrast","raster-fade-duration":"fadeDuration","raster-hue-rotate":"hueRotation","raster-opacity":"opacity","raster-saturation":"saturation","line-blur":"blur","line-cap":"lineCap","line-color":"strokeColor","line-dasharray":"strokeDashArray","line-width":"strokeWidth","line-gradient":"strokeGradient","line-join":"lineJoin","line-opacity":"strokeOpacity","line-translate":"translate","line-translate-anchor":"translateAnchor","line-offset":"offset","fill-color":"fillColor","fill-opacity":"fillOpacity","fill-pattern":"fillPattern","fill-extrusion-base":"base","fill-extrusion-height":"height","fill-extrusion-color":"fillColor","fill-extrusion-opacity":"fillOpacity","fill-extrusion-pattern":"fillPattern","fill-extrusion-translate":"translate","fill-extrusion-translate-anchor":"translateAnchor","fill-extrusion-vertical-gradient":"verticalGradient","circle-blur":"blur","circle-color":"color","circle-opacity":"opacity","circle-pitch-alignment":"pitchAlignment","circle-radius":"radius","circle-stroke-color":"strokeColor","circle-stroke-opacity":"strokeOpacity","circle-stroke-width":"strokeWidth","heatmap-color":"color","heatmap-intensity":"intensity","heatmap-opacity":"opacity","heatmap-radius":"radius","heatmap-weight":"weight","symbol-spacing":"lineSpacing","symbol-placement":"placement","icon-allow-overlap":"iconOptions-allowOverlap","icon-anchor":"iconOptions-anchor","icon-ignore-placement":"iconOptions-ignorePlacement","icon-image":"iconOptions-image","icon-offset":"iconOptions-offset","icon-opacity":"iconOptions-opacity","icon-optional":"iconOptions-optional","icon-pitch-alignment":"iconOptions-pitchAlignment","icon-rotate":"iconOptions-rotation","icon-rotation-alignment":"iconOptions-rotationAlignment","text-allow-overlap":"textOptions-allowOverlap","text-anchor":"textOptions-anchor","text-color":"textOptions-color","text-halo-blur":"textOptions-haloBlur","text-halo-color":"textOptions-haloColor","text-halo-width":"textOptions-haloWidth","text-ignore-placement":"textOptions-ignorePlacement","text-offset":"textOptions-offset","text-opacity":"textOptions-opacity","text-optional":"textOptions-optional","text-pitch-alignment":"textOptions-pitchAlignment","text-rotate":"textOptions-rotation","text-rotation-alignment":"textOptions-rotationAlignment","text-size":"textOptions-size","text-field":"textOptions-textField"},d);function d(t){this.rasterSources={},this._map=t}t.MapboxStyleImporter=e}(this.atlas=this.atlas||{},atlas);
